import{f as y,h as _,j as p,u as f,_ as M,n as v,r as b,o as P,l as h,w as A,a as s,m as g,p as w,d as x}from"./app-2f8c304a.js";import E from"./MyIcon-184b0d53.js";import{a as G}from"./axios-21b846bc.js";import{_ as C}from"./plugin-vue_export-helper-c27b6911.js";const I={class:"MyMusic"},S=s("div",{id:"GlobalAPlayer"},null,-1),B=y({__name:"NavMusic",setup(N){let l,a=_(!1),i=[];const m=()=>{a.value=!a.value},r=()=>{a.value&&(a.value=!1)},u=()=>{const t=document.querySelector(".vp-navbar-end");if(!t)return;if(!document.querySelector("#MyMusic_Menu")){const o=document.createElement("div");o.id="MyMusic_Menu",o.classList.add("nav-item"),o.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',t.appendChild(o)}const e=document.querySelector("#MyMusic_Menu");e.onclick=o=>{m(),o.stopPropagation()};const n=document.querySelector(".MyMusic");n.onclick=o=>{o.stopPropagation()}},d=()=>{if(!l)return;const t=window,e=document.getElementById("GlobalAPlayer");!e||i.length<1||(c(),e.classList.contains("aplayer"))||(t.GlobalAPlayer=new l({container:document.getElementById("GlobalAPlayer"),audio:i,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:1,storageName:"GlobalAPlayer"}),t.GlobalAPlayer.on("play",function(){c()}),t.GlobalAPlayer.on("pause",function(){c()}))};function c(){var e,n;const t=window;t.GlobalAPlayer&&t.GlobalAPlayer.mode&&(t.GlobalAPlayer.paused?(e=document.getElementById("MyMusic_icon"))==null||e.setAttribute("spin","false"):(n=document.getElementById("MyMusic_icon"))==null||n.setAttribute("spin","true"))}return p(()=>{const t=f();G({method:"get",url:"//file.mo7.cc/music/list.json",params:{}}).then(e=>{var n=e.data;n&&n.length>0&&(i=n)}),M(()=>import("./APlayer.min-0b78babc.js").then(e=>e.A),["assets/APlayer.min-0b78babc.js","assets/commonjsHelpers-042e6b4d.js"]).then(e=>{v(()=>{l=e.default,u(),d(),window.document.body.onclick=()=>{r()}}),t.beforeEach(()=>{setTimeout(()=>{u(),d()},50)})})}),(t,e)=>{const n=b("ClientOnly");return P(),h(n,null,{default:A(()=>[s("div",I,[s("div",{class:g(["MyMusic_Play",{hide:!w(a)}])},[s("div",{class:"close",onClick:r},[x(E,{name:"guanbi"})]),S],2)])]),_:1})}}});const O=C(B,[["__file","NavMusic.vue"]]);export{O as default};
