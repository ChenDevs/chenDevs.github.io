import { setAttribute, isString } from 'maverick.js/std';
import { b as isMediaStream } from '../audio/loader.js';
import { H as HTMLMediaEvents } from './htmlâ€“media-events.js';
import { N as NativeAudioTracks } from './native-audio-tracks.js';

class HTMLMediaProvider {
  constructor(_media) {
    this.k = _media;
  }
  setup(context) {
    new HTMLMediaEvents(this, context);
    if ("audioTracks" in this.media)
      new NativeAudioTracks(this, context);
  }
  get type() {
    return "";
  }
  get media() {
    return this.k;
  }
  get paused() {
    return this.k.paused;
  }
  get muted() {
    return this.k.muted;
  }
  set muted(muted) {
    this.k.muted = muted;
  }
  get volume() {
    return this.k.volume;
  }
  set volume(volume) {
    this.k.volume = volume;
  }
  get currentTime() {
    return this.k.currentTime;
  }
  set currentTime(time) {
    this.k.currentTime = time;
  }
  get playsinline() {
    return this.k.hasAttribute("playsinline");
  }
  set playsinline(playsinline) {
    setAttribute(this.k, "playsinline", playsinline);
  }
  get playbackRate() {
    return this.k.playbackRate;
  }
  set playbackRate(rate) {
    this.k.playbackRate = rate;
  }
  async play() {
    return this.k.play();
  }
  async pause() {
    return this.k.pause();
  }
  async loadSource({ src }, preload) {
    this.k.preload = preload;
    if (isMediaStream(src)) {
      this.k.srcObject = src;
    } else {
      this.k.srcObject = null;
      this.k.src = isString(src) ? src : window.URL.createObjectURL(src);
    }
    this.k.load();
  }
}

export { HTMLMediaProvider as H };
